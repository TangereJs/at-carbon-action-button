<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../at-theme/at-theme.html">
<link rel="import" href="../at-carbon-button/at-carbon-button.html">
<link rel="import" href="../at-carbon-icon-button/at-carbon-icon-button.html">

<dom-module id="at-carbon-action-button">
  <template>
    <style include="at-form-common"></style>
    <style>
      .background-green {
        background-color: var(--at-green);
      }

      .color-white {
        color: #FFFFFF;
      }

      .color-black {
        color: #000000;
      }

      at-carbon-icon-button {
        vertical-align: middle;
        padding: 4px;
      }

      iron-label {
        vertical-align: middle;
        line-height: 1;
        margin-right: 0.29em;
      }
    </style>
    <div id="atContainer" class="at-container">
      <at-carbon-button id="button" disabled$="[[disabled]]" class="background-green">
        <template is="dom-if" if="{{_isSubmit(xtype)}}">
          <at-carbon-icon-button disabled$="[[disabled]]" icon="now:checkmark" color="white"></at-carbon-icon-button>
          <iron-label disabled$="[[disabled]]" class="color-white">Submit</iron-label>
        </template>
        <template is="dom-if" if="{{_isCancel(xtype)}}">
          <at-carbon-icon-button disabled$="[[disabled]]" icon="now:cancel" color="black"></at-carbon-icon-button>
          <iron-label disabled$="[[disabled]]" class="color-black">Cancel</iron-label>
        </template>
      </at-carbon-button>
    </div>
  </template>
  <script>
    'use strict';
    Polymer({
      is: 'at-carbon-action-button',
      properties: {
        disabled: {
          type: Boolean,
          value: false
        },
        xtype: {
          type: String,
          value: 'submit',
          xtype: 'enum',
          xvaluelist: [{
            title: "Submit",
            value: "submit"
          }, {
            title: "Cancel",
            value: "cancel"
          }],
          observer: 'xtypeChanged'
        }
      },
      _isSubmit: function (xtype) {
        return xtype === "submit";
      },
      _isCancel: function (xtype) {
        return xtype === "cancel";
      },
      ready: function() {
      },
      xtypeChanged: function (newValue, oldValue) {
        var button = this.$.button;
        this.toggleClass('background-green', newValue === "submit", button);
      }
    });
  </script>
</dom-module>
